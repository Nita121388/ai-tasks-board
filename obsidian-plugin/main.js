/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
If you want to view the source, please visit the github repository of this plugin
*/

var F=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames;var Z=Object.prototype.hasOwnProperty;var tt=(e,a)=>{for(var t in a)F(e,t,{get:a[t],enumerable:!0})},st=(e,a,t,s)=>{if(a&&typeof a=="object"||typeof a=="function")for(let i of X(a))!Z.call(e,i)&&i!==t&&F(e,i,{get:()=>a[i],enumerable:!(s=Q(a,i))||s.enumerable});return e};var et=e=>st(F({},"__esModule",{value:!0}),e);var Tt={};tt(Tt,{default:()=>$});module.exports=et(Tt);var q=require("obsidian");var S=require("obsidian"),M={boardPath:"Tasks/Boards/Board.md",runtimeUrl:"http://127.0.0.1:17890"},E=class extends S.PluginSettingTab{constructor(a,t){super(a,t),this.plugin=t}display(){let{containerEl:a}=this;a.empty(),new S.Setting(a).setName("Board file path").setDesc("Path to Board.md inside your vault (e.g. Tasks/Boards/Board.md).").addText(t=>{t.setPlaceholder("Tasks/Boards/Board.md").setValue(this.plugin.settings.boardPath).onChange(async s=>{this.plugin.settings.boardPath=s.trim(),await this.plugin.saveSettings()})}),new S.Setting(a).setName("Runtime URL").setDesc("Local runtime base URL (Agno + FastAPI).").addText(t=>{t.setPlaceholder("http://127.0.0.1:17890").setValue(this.plugin.settings.runtimeUrl).onChange(async s=>{this.plugin.settings.runtimeUrl=s.trim(),await this.plugin.saveSettings()})})}};var I=require("obsidian");var L="<!-- AI-TASKS:BEGIN -->",C="<!-- AI-TASKS:END -->",O=/<!--\s*AI-TASKS:TASK\s+([0-9a-fA-F-]{8,})\s+BEGIN\s*-->/g;function j(e){let a=e.trim();return a==="Unassigned"?"Unassigned":a==="Todo"?"Todo":a==="Doing"?"Doing":a==="Review"?"Review":a==="Done"?"Done":null}function at(e){let a=e.split(`
`);for(let t of a){let s=t.match(/^>\s*\[![^\]]+\]\s*(.+)\s*$/);if(s!=null&&s[1])return s[1].trim()}return"(Untitled)"}function it(e){let a=e.split(`
`);for(let t of a){let s=t.match(/^>\s*tags::\s*(.+)\s*$/i);if(s!=null&&s[1])return s[1].split(/[,ï¼Œ]/).map(i=>i.trim()).filter(i=>i.length>0)}return[]}function nt(e){var t;let a=e.split(`
`);for(let s of a){let i=s.match(/^>\s*status::\s*(.+)\s*$/i);if(i!=null&&i[1])return(t=j(i[1]))!=null?t:null}return null}function rt(e){let a=e.indexOf(L),t=e.indexOf(C);if(a===-1||t===-1||t<=a)throw new Error(`Board is missing auto area markers (${L} / ${C}).`);return{autoStart:a+L.length,autoEnd:t}}function ot(e,a,t){var c;let i=e.slice(a,t).split(`
`),n=a,r=[];for(let d of i){let o=d.trimStart();if(o.startsWith("## ")){let p=o.slice(3).trim(),l=j(p);if(l){let g=n+d.indexOf("## "),h=n+d.length;r.push({status:l,start:g,end:h})}}n+=d.length+1}let u=new Map;for(let d=0;d<r.length;d++){let o=r[d];if(!o)continue;let p=r[d+1],l=o.end+1,g=p?p.start:t,h=e.slice(l,g),f=[];O.lastIndex=0;let m;for(;m=O.exec(h);){let B=m[1];if(!B)continue;let T=m.index,b=l+T,N=`<!-- AI-TASKS:TASK ${B} END -->`,R=h.indexOf(N,T);if(R===-1)continue;let v=l+R+N.length;for(;v<e.length&&e[v]===`
`;){v+=1,v<e.length&&e[v]===`
`&&(v+=1);break}let A=e.slice(b,v),z=(c=nt(A))!=null?c:o.status,Y=at(A),J=it(A);f.push({uuid:B,title:Y,status:z,tags:J,rawBlock:A,start:b,end:v})}u.set(o.status,{status:o.status,headingStart:o.start,headingEnd:o.end,sectionStart:l,sectionEnd:g,tasks:f})}return u}function x(e){let{autoStart:a,autoEnd:t}=rt(e),s=ot(e,a,t);return{content:e,autoStart:a,autoEnd:t,sections:s}}function lt(e,a){let t=e.split(`
`),s=!1,i=t.map(n=>n.match(/^>\s*status::\s*(.+)\s*$/i)?(s=!0,`> status:: ${a}`):n);if(!s)for(let n=0;n<i.length;n++){let r=i[n];if(r&&r.match(/^>\s*\[![^\]]+\]/)){i.splice(n+1,0,`> status:: ${a}`);break}}return i.join(`
`)}function K(e,a,t){let s=e.sections.get(a);if(!s)throw new Error(`Missing status section: ${a}`);if(t){for(let n of s.tasks)if(n.uuid===t)return n.start}let i=s.tasks.at(-1);return i?i.end:s.sectionStart}function D(e,a,t,s){let i=x(e),n=null,r=null;for(let[B,T]of i.sections.entries()){for(let b of T.tasks)if(b.uuid===a){n=b,r=B;break}if(n)break}if(!n||!r)throw new Error(`Task not found: ${a}`);let u=s===a?null:s,c=n.rawBlock;r!==t&&(c=lt(c,t));let d=e.slice(0,n.start)+e.slice(n.end),o=x(d),p=K(o,t,u),l=d.slice(0,p),g=d.slice(p),h=l.length>0&&!l.endsWith(`
`),f=!c.endsWith(`
`),m=(h?`
`:"")+c+(f?`
`:"");return d=l+m+g,d}function H(e,a,t,s){let i=x(e),n=K(i,a,t),r=e.slice(0,n),u=e.slice(n),c=r.length>0&&!r.endsWith(`
`),d=!s.endsWith(`
`),o=(c?`
`:"")+s+(d?`
`:"");return r+o+u}function _(e,a,t){let s=x(e),i=null;for(let u of s.sections.values()){for(let c of u.tasks)if(c.uuid===a){i=c;break}if(i)break}if(!i)throw new Error(`Task not found: ${a}`);let n=!t.endsWith(`
`),r=t+(n?`
`:"");return e.slice(0,i.start)+r+e.slice(i.end)}var w="ai-tasks-board-view",U=["Unassigned","Todo","Doing","Review","Done"];function ct(){return new Date().toISOString().replace(/[:.]/g,"-")}function dt(e,a){var r;let s=((r=e.split("/").pop())!=null?r:"Board.md").replace(/\.md$/i,`.${a}.md`),i=e.lastIndexOf("/Boards/");return i!==-1?`${e.slice(0,i)}/History/Boards/${s}`:`${e.split("/").slice(0,-1).join("/")}/History/${s}`}async function V(e,a){let t=a.split("/").filter(i=>i.length>0),s="";for(let i of t)s=s?`${s}/${i}`:i,e.getAbstractFileByPath(s)||await e.createFolder(s)}var P=class extends I.ItemView{constructor(t,s){super(t);this.statusFilter="All";this.tagFilter=new Set;this.plugin=s}getViewType(){return w}getDisplayText(){return"AI Tasks Board"}getIcon(){return"layout-list"}async onOpen(){await this.render()}async onClose(){this.contentEl.empty()}async getBoardFile(){let t=this.plugin.settings.boardPath,s=this.app.vault.getAbstractFileByPath(t);return s instanceof I.TFile?s:null}async createDefaultBoard(){let t=this.plugin.settings.boardPath,s=t.split("/").slice(0,-1).join("/");s&&await V(this.app.vault,s);let i=["---","schema: ai-tasks-board/v1","board_id: ai-tasks-board","statuses: [Unassigned, Todo, Doing, Review, Done]","---","","# AI Tasks Board","","<!-- AI-TASKS:BEGIN -->","## Unassigned","","## Todo","","## Doing","","## Review","","## Done","<!-- AI-TASKS:END -->",""].join(`
`);await this.app.vault.create(t,i)}async snapshotBoard(t,s){let i=ct(),n=dt(t.path,i),r=n.split("/").slice(0,-1).join("/");await V(this.app.vault,r),await this.app.vault.create(n,s)}async writeBoard(t,s){let i=await this.app.vault.read(t);await this.snapshotBoard(t,i),await this.app.vault.modify(t,s)}renderHeader(t,s){let i=t.createDiv({cls:"ai-tasks-board-header"});i.createDiv({cls:"ai-tasks-board-title",text:"AI Tasks Board"});let n=i.createDiv({cls:"ai-tasks-board-controls"}),r=n.createEl("select",{cls:"ai-tasks-board-select"});r.add(new Option("All statuses","All"));for(let o of U)r.add(new Option(o,o));r.value=this.statusFilter,r.addEventListener("change",async()=>{let o=r.value;this.statusFilter=o==="All"?"All":o,await this.render()});let u=n.createDiv({cls:"ai-tasks-board-tags"}),c=u.createDiv({cls:"ai-tasks-board-tags-title",text:"Tags"}),d=u.createDiv({cls:"ai-tasks-board-tags-list"});if(s.length===0)d.createDiv({cls:"ai-tasks-board-tags-empty",text:"(none)"});else for(let o of s){let p=d.createEl("label",{cls:"ai-tasks-tag"}),l=p.createEl("input",{type:"checkbox"});l.checked=this.tagFilter.has(o),l.addEventListener("change",async()=>{l.checked?this.tagFilter.add(o):this.tagFilter.delete(o),await this.render()}),p.createSpan({text:o})}c.addEventListener("click",async()=>{this.tagFilter.clear(),await this.render()})}shouldShowTask(t){if(this.statusFilter!=="All"&&t.status!==this.statusFilter)return!1;if(this.tagFilter.size>0){for(let s of this.tagFilter)if(t.tags.includes(s))return!0;return!1}return!0}createCard(t,s,i){let n=t.createDiv({cls:"ai-task-card",attr:{"data-uuid":s.uuid}});n.draggable=!0;let r=n.createDiv({cls:"ai-task-card-top"});r.createDiv({cls:"ai-task-title",text:s.title});let u=r.createEl("select",{cls:"ai-task-status"});for(let c of U)u.add(new Option(c,c));if(u.value=s.status,u.addEventListener("change",async()=>{await i(s.uuid,u.value,null)}),s.tags.length>0){let c=n.createDiv({cls:"ai-task-tags"});for(let d of s.tags)c.createSpan({cls:"ai-task-tag",text:d})}return n.addEventListener("dragstart",c=>{var d,o,p;(d=c.dataTransfer)==null||d.setData("text/plain",s.uuid),(o=c.dataTransfer)==null||o.setData("application/x-ai-task-uuid",s.uuid),(p=c.dataTransfer)==null||p.setDragImage(n,8,8),n.classList.add("is-dragging")}),n.addEventListener("dragend",()=>{n.classList.remove("is-dragging")}),n}attachColumnDnD(t,s,i){t.addEventListener("dragover",n=>{n.preventDefault(),t.classList.add("is-drop-target")}),t.addEventListener("dragleave",()=>{t.classList.remove("is-drop-target")}),t.addEventListener("drop",async n=>{var o,p,l,g;n.preventDefault(),t.classList.remove("is-drop-target");let r=((o=n.dataTransfer)==null?void 0:o.getData("application/x-ai-task-uuid"))||((p=n.dataTransfer)==null?void 0:p.getData("text/plain"));if(!r)return;let u=n.target,c=(l=u==null?void 0:u.closest)==null?void 0:l.call(u,".ai-task-card"),d=(g=c==null?void 0:c.getAttribute("data-uuid"))!=null?g:null;await i(r,s,d)})}async render(){var d;let t=this.contentEl;t.empty(),t.addClass("ai-tasks-board-root");let s=await this.getBoardFile();if(!s){let o=t.createDiv({cls:"ai-tasks-board-empty"});o.createDiv({text:`Board file not found: ${this.plugin.settings.boardPath}`}),o.createEl("button",{text:"Create board"}).addEventListener("click",async()=>{await this.createDefaultBoard(),await this.render()});return}let i=await this.app.vault.read(s),n;try{n=x(i)}catch(o){t.createDiv({cls:"ai-tasks-board-error"}).createDiv({text:o instanceof Error?o.message:"Failed to parse Board.md (unknown error)."});return}let r=Array.from(new Set(Array.from(n.sections.values()).flatMap(o=>o.tasks.flatMap(p=>p.tags)))).sort();this.renderHeader(t,r);let u=t.createDiv({cls:"ai-tasks-board-columns"}),c=async(o,p,l)=>{let g=await this.app.vault.read(s),h=D(g,o,p,l);await this.writeBoard(s,h),await this.render()};for(let o of U){let p=u.createDiv({cls:"ai-tasks-column"});p.createDiv({cls:"ai-tasks-column-title",text:o});let l=p.createDiv({cls:"ai-tasks-column-list"});this.attachColumnDnD(l,o,c);let g=n.sections.get(o),h=((d=g==null?void 0:g.tasks)!=null?d:[]).filter(f=>this.shouldShowTask(f));for(let f of h)this.createCard(l,f,c)}}};var k=require("obsidian");function ut(e){let a=(e!=null?e:"").trim();return a==="Todo"?"Todo":a==="Doing"?"Doing":a==="Review"?"Review":a==="Done"?"Done":"Unassigned"}function pt(){let e=globalThis.crypto;return e!=null&&e.randomUUID?e.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{let t=Math.floor(Math.random()*16);return(a==="x"?t:t&3|8).toString(16)})}function gt(){return new Date().toISOString().replace(/[:.]/g,"-")}function ft(e,a){var r;let s=((r=e.split("/").pop())!=null?r:"Board.md").replace(/\\.md$/i,`.${a}.md`),i=e.lastIndexOf("/Boards/");return i!==-1?`${e.slice(0,i)}/History/Boards/${s}`:`${e.split("/").slice(0,-1).join("/")}/History/${s}`}async function W(e,a){let t=a.split("/").filter(i=>i.length>0),s="";for(let i of t)s=s?`${s}/${i}`:i,e.getAbstractFileByPath(s)||await e.createFolder(s)}function ht(){return["---","schema: ai-tasks-board/v1","board_id: ai-tasks-board","statuses: [Unassigned, Todo, Doing, Review, Done]","---","","# AI Tasks Board","","<!-- AI-TASKS:BEGIN -->","## Unassigned","","## Todo","","## Doing","","## Review","","## Done","<!-- AI-TASKS:END -->",""].join("\\n")}async function mt(e){let a=e.settings.boardPath,t=e.app.vault.getAbstractFileByPath(a);if(t instanceof k.TFile)return t;let s=a.split("/").slice(0,-1).join("/");return s&&await W(e.app.vault,s),await e.app.vault.create(a,ht())}function kt(e,a){return e.replace(/\/+$/g,"")+a}async function vt(e,a){let t=kt(e.settings.runtimeUrl,"/v1/board/propose"),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let i=await s.text().catch(()=>"");throw new Error(`Runtime error (${s.status}): ${i}`)}return await s.json()}function G(e){return e.replace(/\\r\\n/g,"\\n").split("\\n").map(t=>t.length?`> ${t}`:">")}function xt(e){let a=new Date().toISOString(),t=[];return t.push(`<!-- AI-TASKS:TASK ${e.uuid} BEGIN -->`),t.push(`> [!todo] ${e.title}`),t.push(`> status:: ${e.status}`),e.tags.length>0&&t.push(`> tags:: ${e.tags.join(", ")}`),t.push(`> created:: ${a}`),e.sourcePath&&t.push(`> source:: [[${e.sourcePath}]]`),t.push(">"),t.push(...G(e.body)),t.push(`<!-- AI-TASKS:TASK ${e.uuid} END -->`),t.join("\\n")+"\\n"}function Bt(e,a){var d,o,p;let t=e.replace(/\\r\\n/g,"\\n").replace(/\\n$/,"").split("\\n"),s=new RegExp(`^<!--\\s*AI-TASKS:TASK\\s+${a.uuid}\\s+END\\s*-->\\s*$`,"i"),i=t.findIndex(l=>s.test(l.trim()));if(i===-1)throw new Error("Malformed task block (missing END marker).");let n=t.findIndex(l=>/^>\\s*\\[![^\\]]+\\]/.test(l));if(n!==-1){let l=(d=t[n])==null?void 0:d.match(/^>\\s*(\\[![^\\]]+\\])\\s*(.*)$/),g=(o=l==null?void 0:l[1])!=null?o:"[!todo]";t[n]=`> ${g} ${a.title}`}let r=t.findIndex(l=>/^>\\s*status::/i.test(l));if(r!==-1)t[r]=`> status:: ${a.status}`;else{let l=n!==-1?n+1:1;t.splice(l,0,`> status:: ${a.status}`),r=l}if(a.tags.length>0){let l=t.findIndex(g=>/^>\\s*tags::/i.test(g));l!==-1?t[l]=`> tags:: ${a.tags.join(", ")}`:t.splice(r+1,0,`> tags:: ${a.tags.join(", ")}`)}let u=new Date().toISOString(),c=[];return c.push(">"),c.push("> ---"),c.push(`> updated:: ${u}`),(p=a.instruction)!=null&&p.trim()&&c.push(`> instruction:: ${a.instruction.trim()}`),c.push(...G(a.body)),t.splice(i,0,...c),t.join("\\n")+"\\n"}var y=class extends k.Modal{constructor(t,s){var i;super(t.app);this.instruction="";this.boardFile=null;this.boardContent="";this.proposal=null;this.beforeBlock="";this.afterBlock="";this.nextBoardContent="";this.statusEl=null;this.beforeEl=null;this.afterEl=null;this.plugin=t,this.mode=s.mode,this.sourcePath=(i=s.sourcePath)!=null?i:null,this.draft=s.selection}onOpen(){let{contentEl:t}=this;t.empty(),t.addClass("ai-tasks-draft-modal"),t.createEl("h2",{text:this.mode==="create"?"AI Tasks: Add to board":"AI Tasks: Update board"});let s=t.createDiv({cls:"ai-tasks-draft-box"});s.createDiv({cls:"ai-tasks-draft-label",text:"Draft (editable)"});let i=s.createEl("textarea",{cls:"ai-tasks-draft-textarea"});i.value=this.draft,i.addEventListener("input",()=>{this.draft=i.value});let n=t.createDiv({cls:"ai-tasks-instr-box"});n.createDiv({cls:"ai-tasks-draft-label",text:"Extra instruction (optional)"});let r=n.createEl("textarea",{cls:"ai-tasks-draft-textarea"});r.placeholder="e.g. set status=Todo, add tag=release, update existing task if it matches...",r.addEventListener("input",()=>{this.instruction=r.value});let u=t.createDiv({cls:"ai-tasks-draft-buttons"}),c=u.createEl("button",{text:"Generate preview"}),d=u.createEl("button",{text:"Confirm & write"}),o=u.createEl("button",{text:"Cancel"});this.statusEl=t.createDiv({cls:"ai-tasks-draft-status",text:""});let p=t.createDiv({cls:"ai-tasks-draft-preview"}),l=p.createDiv({cls:"ai-tasks-draft-side"});l.createDiv({cls:"ai-tasks-draft-label",text:"Before"}),this.beforeEl=l.createEl("textarea",{cls:"ai-tasks-draft-preview-textarea"}),this.beforeEl.readOnly=!0;let g=p.createDiv({cls:"ai-tasks-draft-side"});g.createDiv({cls:"ai-tasks-draft-label",text:"After"}),this.afterEl=g.createEl("textarea",{cls:"ai-tasks-draft-preview-textarea"}),this.afterEl.readOnly=!0,c.addEventListener("click",async()=>{await this.generate()}),d.addEventListener("click",async()=>{await this.apply()}),o.addEventListener("click",()=>{this.close()}),this.generate()}setStatus(t){this.statusEl&&(this.statusEl.textContent=t)}async generate(){var t,s,i,n,r,u;try{this.setStatus("Generating preview..."),this.boardFile=await mt(this.plugin),this.boardContent=await this.plugin.app.vault.read(this.boardFile);let c=x(this.boardContent),d=Array.from(c.sections.values()).flatMap(h=>h.tasks.map(f=>({uuid:f.uuid,title:f.title,status:f.status,tags:f.tags}))),o={mode:this.mode,draft:this.draft,instruction:this.instruction||null,tasks:d};this.proposal=await vt(this.plugin,o);let p=this.proposal.action,l=ut(this.proposal.status);if(p==="update"&&this.proposal.target_uuid){let h=this.proposal.target_uuid,f=null;for(let[m,B]of c.sections.entries()){for(let T of B.tasks)if(T.uuid===h){f={rawBlock:T.rawBlock,sectionStatus:m};break}if(f)break}if(!f)this.proposal.action="create";else{this.beforeBlock=f.rawBlock,this.afterBlock=Bt(this.beforeBlock,{uuid:h,title:this.proposal.title||"(Untitled)",status:l,tags:(t=this.proposal.tags)!=null?t:[],body:this.proposal.body||this.draft,instruction:this.instruction||null});let m=_(this.boardContent,h,this.afterBlock);f.sectionStatus!==l&&(m=D(m,h,l,null)),this.nextBoardContent=m}}if(this.proposal.action==="create"){let h=pt();this.beforeBlock="",this.afterBlock=xt({uuid:h,title:this.proposal.title||"(Untitled)",status:l,tags:(s=this.proposal.tags)!=null?s:[],body:this.proposal.body||this.draft,sourcePath:this.sourcePath});let f=(u=(r=(n=(i=c.sections.get(l))==null?void 0:i.tasks)==null?void 0:n[0])==null?void 0:r.uuid)!=null?u:null;this.nextBoardContent=H(this.boardContent,l,f,this.afterBlock)}this.beforeEl&&(this.beforeEl.value=this.beforeBlock),this.afterEl&&(this.afterEl.value=this.afterBlock);let g=[];this.proposal.reasoning&&g.push(this.proposal.reasoning),this.proposal.confidence!=null&&g.push(`confidence=${this.proposal.confidence.toFixed(2)}`),this.setStatus(g.length?g.join(" | "):"Preview ready.")}catch(c){let d=c instanceof Error?c.message:String(c);this.setStatus(`Failed: ${d}`),new k.Notice(`AI Tasks: ${d}`)}}async apply(){if(!this.boardFile){new k.Notice("AI Tasks: board file not ready.");return}if(!this.nextBoardContent){new k.Notice("AI Tasks: please generate preview first.");return}try{let t=await this.plugin.app.vault.read(this.boardFile),s=gt(),i=ft(this.boardFile.path,s),n=i.split("/").slice(0,-1).join("/");await W(this.plugin.app.vault,n),await this.plugin.app.vault.create(i,t),await this.plugin.app.vault.modify(this.boardFile,this.nextBoardContent),new k.Notice("AI Tasks: wrote board update (history snapshot created)."),this.close()}catch(t){let s=t instanceof Error?t.message:String(t);new k.Notice(`AI Tasks: write failed: ${s}`)}}};var $=class extends q.Plugin{async onload(){await this.loadSettings(),this.registerView(w,a=>new P(a,this)),this.addCommand({id:"open-ai-tasks-board",name:"Open AI Tasks board",callback:async()=>{await this.activateView()}}),this.registerEvent(this.app.workspace.on("editor-menu",(a,t,s)=>{let i=t.getSelection();!i||i.trim().length===0||(a.addItem(n=>{n.setTitle("AI Tasks: Add to board").setIcon("plus").onClick(()=>{var r;new y(this,{mode:"create",selection:i,sourcePath:(r=s.file)==null?void 0:r.path}).open()})}),a.addItem(n=>{n.setTitle("AI Tasks: Update board (AI)").setIcon("wand-2").onClick(()=>{var r;new y(this,{mode:"auto",selection:i,sourcePath:(r=s.file)==null?void 0:r.path}).open()})}))})),this.addSettingTab(new E(this.app,this))}onunload(){this.app.workspace.detachLeavesOfType(w)}async activateView(){var i;let t=this.app.workspace.getLeavesOfType(w)[0];if(t){this.app.workspace.revealLeaf(t);return}let s=(i=this.app.workspace.getRightLeaf(!1))!=null?i:this.app.workspace.getLeaf();await s.setViewState({type:w,active:!0}),this.app.workspace.revealLeaf(s)}async loadSettings(){this.settings=Object.assign({},M,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
